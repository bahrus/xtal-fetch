(function(){function a(){if(!customElements.get('xtal-fetch')){var a=function(a){function b(){babelHelpers.classCallCheck(this,b);var a=babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments));return a.fetchInProgress=!1,a.as='text',a._cachedResults={},a.__loadNewUrlDebouncer=a.debounce(function(){a.loadNewUrl()},0),a}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'debounce',value:function(a,b,c){var d;return function(){var e=this,f=arguments;clearTimeout(d),d=setTimeout(function(){d=null,c||a.apply(e,f)},b),c&&!d&&a.apply(e,f)}}},{key:'debounceDurationHandler',value:function(){var a=this;this.__loadNewUrlDebouncer=this.debounce(function(){a.loadNewUrl()},this.debounceDuration)}},{key:'loadNewUrl',value:function(){var a=this;if(this.fetch&&(!this.reqInitRequired||this.reqInit)&&(this._setErrorText(null),this._setErrorResponse(null),this.href)){var b=this,c=0;if(this.forEach){if(!this.inEntities)return;var d=this.forEach.split(','),e=this.inEntities.length;this._setFetchInProgress(!0),this.inEntities.forEach(function(f){f.__xtal_idx=c,c++;var g=a.href;if(d.forEach(function(a){g=g.replace(':'+a,f[a])}),a.cacheResults){var h=a.cachedResults[g];if(h)return f[a.setPath]=h,e--,void(0===e&&a._setFetchInProgress(!1))}fetch(g,a.reqInit).then(function(c){200===c.status?c[b.as]().then(function(b){e--,0===e&&a._setFetchInProgress(!1),a.cacheResults&&(a.cachedResults[g]=b),f[a.setPath]=b;var c={entity:f,href:g};a.dispatchEvent(new CustomEvent('fetch-complete',{detail:c,bubbles:!0,composed:!1}))}):c.text().then(function(b){a._setErrorText(b)})})})}else{if(this.cacheResults){var f=this.cachedResults[this.href];if(f)return void b._setResult(f)}this._setFetchInProgress(!0);var g=this.href;fetch(g,this.reqInit).then(function(c){a._setFetchInProgress(!1),a._setErrorResponse(c),200===c.status?c[b.as]().then(function(c){a.cachedResults&&(a.cachedResults[a.href]=c),b._setResult(c),'string'===typeof c&&a.insertResults&&(a.innerHTML=c);a.dispatchEvent(new CustomEvent('fetch-complete',{detail:{href:g},bubbles:!0,composed:!1}))}):c.text().then(function(b){a._setErrorText(b)})}).catch(function(b){a._setErrorResponse(b),a._setFetchInProgress(!1)})}}}},{key:'cachedResults',get:function(){return this._cachedResults}}],[{key:'is',get:function(){return'xtal-fetch'}},{key:'properties',get:function(){return{as:{type:String},cacheResults:{type:Boolean},debounceDuration:{type:Number,observer:'debounceDurationHandler'},errorResponse:{type:Object,notify:!0,readOnly:!0},errorText:{type:Object,notify:!0,readOnly:!0},fetch:{type:Boolean,observer:'__loadNewUrlDebouncer'},fetchInProgress:{type:Boolean,notify:!0,readOnly:!0,reflectToAttribute:!0},forEach:{type:String},href:{type:String,observer:'__loadNewUrlDebouncer',reflectToAttribute:!0},inEntities:{type:Array,observer:'__loadNewUrlDebouncer'},insertResults:{type:Boolean},reqInit:{type:Object},reqInitRequired:{type:Boolean},result:{type:Object,notify:!0,readOnly:!0},setPath:{type:String,value:'result',reflectToAttribute:!0}}}}]),b}(Polymer.Element);customElements.define(a.is,a)}}function b(){return'function'!==typeof Polymer||'function'!==typeof Polymer.Element?void setTimeout(b,100):void a()}b()})();