(function(){function a(){if(!customElements.get('xtal-fetch')){var a=function(a){function b(){babelHelpers.classCallCheck(this,b);var a=babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments));return a.fetchInProgress=!1,a.as='text',a._cachedResults={},a.__loadNewUrlDebouncer=a.debounce(function(){a.loadNewUrl()},0),a}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'debounce',value:function(a,b,c){var d;return function(){var e=this,f=arguments;clearTimeout(d),d=setTimeout(function(){d=null,c||a.apply(e,f)},b),c&&!d&&a.apply(e,f)}}},{key:'debounceDurationHandler',value:function(){var a=this;this.__loadNewUrlDebouncer=this.debounce(function(){a.loadNewUrl()},this.debounceDuration)}},{key:'loadNewUrl',value:function(){var a=this;if(this.fetch&&(!this.reqInitRequired||this.reqInit)){this._setErrorText(null),this._setErrorResponse(null);var b=this.baseLinkId?self[this.baseLinkId].href:'';if(this.href){var c=this,d=0;if(this.forEach){if(!this.inEntities)return;var e=this.forEach.split(','),f=this.inEntities.length;this._setFetchInProgress(!0),this.inEntities.forEach(function(g){g.__xtal_idx=d,d++;var h=b+a.href;if(e.forEach(function(a){h=h.replace(':'+a,g[a])}),a.cacheResults){var i=a.cachedResults[h];if(i)return g[a.setPath]=i,f--,void(0===f&&a._setFetchInProgress(!1))}fetch(h,a.reqInit).then(function(b){200===b.status?b[c.as]().then(function(b){f--,0===f&&a._setFetchInProgress(!1),a.cacheResults&&(a.cachedResults[h]=b),g[a.setPath]=b;var c={entity:g,href:h};a.dispatchEvent(new CustomEvent('fetch-complete',{detail:c,bubbles:!0,composed:!1}))}):b.text().then(function(b){a._setErrorText(b)})})})}else{if(this.cacheResults){var g=this.cachedResults[this.href];if(g)return void c._setResult(g)}this._setFetchInProgress(!0);var h=b+this.href;fetch(h,this.reqInit).then(function(b){a._setFetchInProgress(!1),a._setErrorResponse(b),200===b.status?b[c.as]().then(function(b){a.cachedResults&&(a.cachedResults[a.href]=b),c._setResult(b),'string'===typeof b&&a.insertResults&&(a.innerHTML=b,a.dispatchEvent(new CustomEvent('dom-change',{bubbles:!0,composed:!0})));a.dispatchEvent(new CustomEvent('fetch-complete',{detail:{href:h},bubbles:!0,composed:!1}))}):b.text().then(function(b){a._setErrorText(b)})}).catch(function(b){a._setErrorResponse(b),a._setFetchInProgress(!1)})}}}}},{key:'cachedResults',get:function(){return this._cachedResults}}],[{key:'is',get:function(){return'xtal-fetch'}},{key:'properties',get:function(){return{as:{type:String},baseLinkId:{type:String},cacheResults:{type:Boolean},debounceDuration:{type:Number,observer:'debounceDurationHandler'},errorResponse:{type:Object,notify:!0,readOnly:!0},errorText:{type:Object,notify:!0,readOnly:!0},fetch:{type:Boolean,observer:'__loadNewUrlDebouncer'},fetchInProgress:{type:Boolean,notify:!0,readOnly:!0,reflectToAttribute:!0},forEach:{type:String},href:{type:String,observer:'__loadNewUrlDebouncer',reflectToAttribute:!0},inEntities:{type:Array,observer:'__loadNewUrlDebouncer'},insertResults:{type:Boolean},reqInit:{type:Object},reqInitRequired:{type:Boolean},result:{type:Object,notify:!0,readOnly:!0},setPath:{type:String,value:'result',reflectToAttribute:!0}}}}]),b}(Polymer.Element);customElements.define(a.is,a)}}function b(){return'function'!==typeof Polymer||'function'!==typeof Polymer.Element?void setTimeout(b,100):void a()}b()})();