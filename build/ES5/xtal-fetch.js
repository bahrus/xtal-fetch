(function(){function a(a){return a.replace(/(\-\w)/g,function(a){return a[1].toUpperCase()})}var b='fetch',c='href',d='disabled',e=function(a){function e(){babelHelpers.classCallCheck(this,e);var a=babelHelpers.possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments));return a._reqInit={credentials:'include'},a._as='json',a}return babelHelpers.inherits(e,a),babelHelpers.createClass(e,[{key:'de',value:function de(a,b){var c=new CustomEvent(a+'-changed',{detail:b,bubbles:!0,composed:!1});return this.dispatchEvent(c),c}},{key:'_upgradeProperties',value:function _upgradeProperties(a){var b=this;a.forEach(function(a){if(b.hasOwnProperty(a)){var c=b[a];delete b[a],b[a]=c}})}},{key:'attributeChangedCallback',value:function attributeChangedCallback(a,c,e){this['_'+a]=a===b||a===d?null!==e:e,this.onPropsChange()}},{key:'onPropsChange',value:function onPropsChange(){this.loadNewUrl()}},{key:'loadNewUrl',value:function loadNewUrl(){this.fetch&&this.href&&!this.disabled&&this.do()}},{key:'do',value:function _do(){var a=this;self.fetch(this.href,this._reqInit).then(function(b){b[a._as]().then(function(b){a.result=b})})}},{key:'connectedCallback',value:function connectedCallback(){this._upgradeProperties([b,c,d])}},{key:'fetch',get:function get(){return this._fetch},set:function set(a){a?this.setAttribute(b,''):this.removeAttribute(b)}},{key:'disabled',get:function get(){return this._disabled},set:function set(a){a?this.setAttribute(d,''):this.removeAttribute(d)}},{key:'href',get:function get(){return this._href},set:function set(a){this.setAttribute(c,a)}},{key:'result',get:function get(){return this._result},set:function set(a){this._result=a,this.de('result',a)}}],[{key:'is',get:function get(){return'xtal-fetch-get'}},{key:'observedAttributes',get:function get(){return[b,c,d]}}]),e}(HTMLElement);customElements.get(e.is)||customElements.define(e.is,e);var f='debounce-duration',g='req-init-required',h='cache-results',i='insert-results',j='base-link-id',k=function(b){function c(){babelHelpers.classCallCheck(this,c);var a=babelHelpers.possibleConstructorReturn(this,(c.__proto__||Object.getPrototypeOf(c)).call(this));return a._cacheResults=!1,a._cachedResults={},a._fetchInProgress=!1,a._reqInit=null,a}return babelHelpers.inherits(c,b),babelHelpers.createClass(c,[{key:'onPropsChange',value:function onPropsChange(){this.reqInitRequired&&!this.reqInit||(!this.__loadNewUrlDebouncer&&this.debounceDurationHandler(),this.__loadNewUrlDebouncer())}},{key:'attributeChangedCallback',value:function attributeChangedCallback(b,d,e){b===f?(this._debounceDuration=parseFloat(e),this.debounceDurationHandler()):b===g||b===h||b===i?this['_'+a(b)]=null!==e:b===j?this._baseLinkId=e:void 0,babelHelpers.get(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),'attributeChangedCallback',this).call(this,b,d,e)}},{key:'debounce',value:function debounce(a,b,c){var d;return function(){var e=this,f=arguments;clearTimeout(d),d=setTimeout(function(){d=null,c||a.apply(e,f)},b),c&&!d&&a.apply(e,f)}}},{key:'debounceDurationHandler',value:function debounceDurationHandler(){var a=this;this.__loadNewUrlDebouncer=this.debounce(function(){a.loadNewUrl()},this._debounceDuration)}},{key:'do',value:function _do(){var a=this;if(this.errorResponse=null,this._cacheResults){var c=this.cachedResults[this._href];if(c)return void(this.result=c)}this.fetchInProgress=!0;var b=this.href;if(this._baseLinkId){var d=self[this._baseLinkId];d&&(b=d.href+b)}self.fetch(this.href,this._reqInit).then(function(b){a.fetchInProgress=!1,b[a._as]().then(function(c){if(200!==b.status)a.errorResponse=b,b.text().then(function(b){a.errorText=b});else{a.result=c,a.cachedResults&&(a.cachedResults[a._href]=c),'string'===typeof c&&a._insertResults&&(a.innerHTML=c,a.dispatchEvent(new CustomEvent('dom-change',{bubbles:!0,composed:!0})));var d={href:a.href};a.dispatchEvent(new CustomEvent('fetch-complete',{detail:d,bubbles:!0,composed:!1}))}})})}},{key:'connectedCallback',value:function connectedCallback(){babelHelpers.get(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),'connectedCallback',this).call(this),this._upgradeProperties(['debounceDuration','reqInitRequired','cacheResults','reqInit'])}},{key:'reqInit',get:function get(){return this._reqInit},set:function set(a){this._reqInit=a,this.onPropsChange()}},{key:'cacheResults',get:function get(){return this._cacheResults},set:function set(a){a?this.setAttribute(h,''):this.removeAttribute(h)}},{key:'cachedResults',get:function get(){return this._cachedResults}},{key:'reqInitRequired',get:function get(){return this._reqInitRequired},set:function set(a){a?this.setAttribute(g,''):this.removeAttribute(g)}},{key:'debounceDuration',get:function get(){return this._debounceDuration},set:function set(a){this.setAttribute(f,a.toString())}},{key:'errorResponse',get:function get(){return this._errorResponse},set:function set(a){this._errorResponse=a,this.de('error-response',{value:a})}},{key:'errorText',get:function get(){return this._errorText},set:function set(a){this._errorText=a,this.de('error-text',{value:a})}},{key:'fetchInProgress',get:function get(){return this._fetchInProgress},set:function set(a){this._fetchInProgress=a,this.de('fetch-in-progress',{value:a})}},{key:'insertResults',get:function get(){return this._insertResults},set:function set(a){a?this.setAttribute(i,''):this.removeAttribute(i)}},{key:'baseLinkId',get:function get(){return this._baseLinkId},set:function set(a){this.setAttribute(j,a)}}],[{key:'is',get:function get(){return'xtal-fetch-req'}},{key:'observedAttributes',get:function get(){return babelHelpers.get(c.__proto__||Object.getPrototypeOf(c),'observedAttributes',this).concat([f,g,h,i,j])}}]),c}(e);customElements.get(k.is)||customElements.define(k.is,k);var l='for-each',m='set-path',n=function(c){function d(){return babelHelpers.classCallCheck(this,d),babelHelpers.possibleConstructorReturn(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}return babelHelpers.inherits(d,c),babelHelpers.createClass(d,[{key:'attributeChangedCallback',value:function attributeChangedCallback(b,c,e){b===m||b===l?this['_'+a(b)]=e:void 0,babelHelpers.get(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),'attributeChangedCallback',this).call(this,b,c,e)}},{key:'connectedCallback',value:function connectedCallback(){babelHelpers.get(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),'connectedCallback',this).call(this),this._upgradeProperties(['forEach','setPath','inEntities'])}},{key:'onPropsChange',value:function onPropsChange(){var a=this._setPath||this._forEach||this.inEntities;a&&(this._hasAllThreeProps=this._setPath&&this._forEach&&this.inEntities,!this._hasAllThreeProps)||babelHelpers.get(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),'onPropsChange',this).call(this)}},{key:'do',value:function _do(){var a=this;if(!this._hasAllThreeProps)return void babelHelpers.get(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),'do',this).call(this);var c=this._forEach.split(','),e=this._inEntities.length;this.fetchInProgress=!0;for(var f,g=0,h=this._baseLinkId?self[this._baseLinkId].href:'',j=function(d){var f=a._inEntities[d];f.__xtal_idx=g,g++;var i=a._href;if(c.forEach(function(a){i=i.replace(':'+a,f[a])}),i=h+i,a._cacheResults){var j=a.cachedResults[i];if(j)return f[a._setPath]=j,e--,0===e&&(a.fetchInProgress=!1),{v:void 0}}b(i,a._reqInit).then(function(b){200===b.status?b[a._as]().then(function(b){e--,0===e&&(a.fetchInProgress=!1),a._cacheResults&&(a.cachedResults[i]=b),f[a._setPath]=b;var c={entity:f,href:i};a.dispatchEvent(new CustomEvent('fetch-complete',{detail:c,bubbles:!0,composed:!1}))}):(b.text().then(function(b){a.errorText=b}),a.errorResponse=b)})},k=0,i=this._inEntities.length;k<i;k++)if(f=j(k,i),'object'===('undefined'===typeof f?'undefined':babelHelpers.typeof(f)))return f.v}},{key:'forEach',get:function get(){return this._forEach},set:function set(a){this.setAttribute(l,a)}},{key:'setPath',get:function get(){return this._setPath},set:function set(a){this.setAttribute(m,a)}},{key:'inEntities',get:function get(){return this._inEntities},set:function set(a){this._inEntities=a,this.onPropsChange()}}],[{key:'is',get:function get(){return'xtal-fetch-entities'}},{key:'observedAttributes',get:function get(){return babelHelpers.get(d.__proto__||Object.getPrototypeOf(d),'observedAttributes',this).concat([l,m])}}]),d}(k);customElements.get(n.is)||customElements.define(n.is,n);var o=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,null,[{key:'is',get:function get(){return'xtal-fetch'}}]),b}(n);customElements.get(o.is)||customElements.define(n.is,o)})();